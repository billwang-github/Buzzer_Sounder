Version 4
SHEET 1 2144 1132
WIRE 256 128 16 128
WIRE 288 128 256 128
WIRE 480 128 288 128
WIRE 16 144 16 128
WIRE 288 144 288 128
WIRE 480 144 480 128
WIRE 480 240 480 224
WIRE 240 256 -80 256
WIRE 288 256 288 224
WIRE 288 256 240 256
WIRE 336 256 288 256
WIRE 288 304 288 256
WIRE 16 352 16 224
WIRE 16 352 -32 352
WIRE 64 352 16 352
WIRE 192 352 144 352
WIRE 208 352 192 352
WIRE 224 352 208 352
WIRE 192 368 192 352
WIRE -80 384 -80 256
WIRE -32 384 -32 352
WIRE 192 448 192 432
WIRE 288 448 288 400
WIRE 288 448 192 448
WIRE -64 480 -64 448
WIRE 288 480 288 448
FLAG 288 480 0
FLAG 480 240 0
FLAG -32 352 F
FLAG 208 352 B
FLAG 256 128 VCC
FLAG -64 480 0
FLAG 240 256 out
DATAFLAG 336 256 ""
SYMBOL res 48 368 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName Rfb
SYMATTR Value 5k
SYMBOL res 0 128 R0
SYMATTR InstName Rbias
SYMATTR Value 220k
SYMBOL res 272 128 R0
SYMATTR InstName RL
SYMATTR Value 330
SYMBOL voltage 480 128 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 28
SYMBOL BuzFB -64 416 R0
WINDOW 39 -35 103 Left 2
SYMATTR InstName X1
SYMBOL npn 224 304 R0
SYMATTR InstName Q3
SYMATTR Value 2SC1815-Y
SYMBOL diode 208 432 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value 1N4148
TEXT -56 -112 Left 2 !.tran 0 30m 0
TEXT -64 -160 Left 2 !.inc bjt.sub
TEXT -176 -56 Left 2 ;1. Adjust the Rbias to let the BJT bias is 1/2 Vcc\n     Rbias = 270K => 2SC1815-Y\n                  420K => 2SC1815\n2. add reverse diode to clamp the base voltage of the BJT not to negative\n3. Adjust the RL to limit the forward current flow to the buzzer. This will also affect the bias point
